<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>I'm Sorry — (Please read ❤️)</title>
<style>
  :root{
    --bg1:#100f2c;
    --bg2:#5b1d73;
    --accent:#ff6b9a;
    --card:#fffefc;
    --muted:#6b6b7a;
    --glass: rgba(255,255,255,0.06);
    font-family: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background: radial-gradient(1200px 600px at 10% 10%, rgba(255,107,154,0.06), transparent),
                radial-gradient(900px 450px at 90% 90%, rgba(91,29,115,0.08), transparent),
                linear-gradient(180deg,var(--bg1),var(--bg2));
    color: #f7f7fb;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }

  .stage{
    width:100%;
    max-width:920px;
    border-radius:20px;
    padding:32px;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    backdrop-filter: blur(6px);
    box-shadow: 0 10px 30px rgba(3,4,10,0.45);
    position:relative;
    overflow:hidden;
  }

  header{
    display:flex;
    align-items:center;
    gap:16px;
  }
  .heart {
    width:64px;height:64px;flex:0 0 64px;
    display:grid;place-items:center;
    background: radial-gradient(circle at 30% 30%, #fff6f8, #ffdbe6 40%, transparent 41%),
                linear-gradient(180deg,#ff8fb2,#ff6b9a);
    border-radius:18px;
    box-shadow: 0 6px 18px rgba(255,107,154,0.18);
  }
  h1{
    margin:0;
    font-size:20px;
    line-height:1.05;
    letter-spacing:0.2px;
  }
  p.lead{
    margin:6px 0 0 0;
    color:var(--muted);
    font-size:13px;
  }

  main{
    display:grid;
    grid-template-columns: 1fr 360px;
    gap:28px;
    margin-top:22px;
  }

  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.02));
    border-radius:14px;
    padding:22px;
    min-height:260px;
    color:var(--card);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
  }

  .letter{
    font-size:16px;
    line-height:1.55;
    color:#fffdfc;
    white-space:pre-wrap;
    min-height:180px;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .controls{
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  button{
    background: linear-gradient(180deg,var(--accent), #ff4b7f);
    border: none;
    color:white;
    padding:12px 16px;
    border-radius:12px;
    font-weight:600;
    cursor:pointer;
  }
  button.secondary{
    background:transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:var(--card);
  }

  .small{
    font-size:13px;
    color:var(--muted);
  }

  .from{
    margin-top:14px;
    display:flex;
    align-items:center;
    gap:12px;
  }
  .avatar{
    width:48px;height:48px;border-radius:10px;background:linear-gradient(180deg,#fff,#ffe9f1);display:grid;place-items:center;color:#6b1d46;font-weight:700;
  }

  footer{
    margin-top:20px;
    text-align:center;
    color:rgba(255,255,255,0.75);
    font-size:13px;
  }

  .typewriter {
    border-right: 2px solid rgba(255,255,255,0.14);
    padding-right:6px;
    white-space:pre-wrap;
    overflow:hidden;
    width:100%;
  }

  #confettiCanvas{
    position:absolute;
    left:0;top:0;width:100%;height:100%;pointer-events:none;
  }

  @media (max-width:880px){
    main{ grid-template-columns: 1fr; }
    .controls{ flex-direction:row; gap:8px; }
    .controls button{ flex:1 }
  }
</style>
</head>
<body>
  <div class="stage" role="main" aria-labelledby="apologyTitle">
    <canvas id="confettiCanvas"></canvas>

    <header>
      <div class="heart" aria-hidden="true">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none">
          <path d="M12 21s-8-5.6-8-10.3S7.1 3 12 7.1 20 5.9 20 10.7 12 21 12 21z" fill="#fff" fill-opacity=".92"/>
        </svg>
      </div>

      <div>
        <h1 id="apologyTitle">For Cheryl — I'm sorry</h1>
        <p class="lead">A small page from me, with a big apology. Click below to read the whole thing.</p>
      </div>
    </header>

    <main>
      <section class="card">
        <div id="letterContainer" class="letter small">
          <div id="typedText" class="typewriter"></div>
        </div>

        <div class="from small">
          <div class="avatar" aria-hidden="true">S</div>
          <div>
            <div style="font-weight:600">From: Sam</div>
            <div style="color:var(--muted);font-size:13px;margin-top:4px;">I wrote this just for you.</div>
          </div>
        </div>
      </section>

      <aside class="controls">
        <button id="revealBtn">Read my apology</button>
        <button id="gentleBtn" class="secondary">A softer note</button>
        <div style="font-size:13px;color:var(--muted);padding-top:6px">Tip: You can edit the text inside the HTML.</div>
      </aside>
    </main>

    <footer>
      <div class="small">Made with care — open this on your phone or laptop. ❤️</div>
    </footer>
  </div>

<script>
const PERSONAL = {
  herName: "Cheryl",
  yourName: "Sam",
  apologyFull:
`Hi Cheryl,

I’ve been turning this over in my head and the only honest thing I can say is I'm sorry. I didn’t mean to hurt you — and knowing I did is something I regret more than I can say.

You matter to me so much. I made a mistake, and I want to learn from it. I understand if you need space; I only ask for the chance to make things right, to listen, and to show up better.

If you can, please read this as my promise to try — not with empty words, but with changed actions.

All my love,
Sam`,
  apologySoft:
`Hey Cheryl — I'm sorry.

I didn't want us to feel this distance. I care about you and I miss us. If you're open, I’d love to talk and listen — whatever you need.`
};

const typedEl = document.getElementById('typedText');
const revealBtn = document.getElementById('revealBtn');
const gentleBtn = document.getElementById('gentleBtn');

let typingTimer = null;
let currentText = '';
let typingIndex = 0;

function typeText(text, speed = 28) {
  if(typingTimer) clearTimeout(typingTimer);
  typedEl.textContent = "";
  currentText = text;
  typingIndex = 0;

  function step(){
    if(typingIndex <= currentText.length){
      typedEl.textContent = currentText.slice(0, typingIndex);
      typingIndex++;
      typingTimer = setTimeout(step, speed);
    }
  }
  step();
}

revealBtn.addEventListener('click', () => {
  typeText(PERSONAL.apologyFull, 22);
  launchConfetti();
});

gentleBtn.addEventListener('click', () => {
  typeText(PERSONAL.apologySoft, 20);
});

/* Confetti */
function launchConfetti() {
  const canvas = document.getElementById('confettiCanvas');
  const ctx = canvas.getContext('2d');
  const DPR = window.devicePixelRatio || 1;

  function resize() {
    canvas.width = canvas.clientWidth * DPR;
    canvas.height = canvas.clientHeight * DPR;
  }
  resize();
  window.addEventListener('resize', resize);

  const particles = [];
  const colors = ["#ff6b9a","#ffd166","#8ad4ff","#b29cff","#ffb3e1","#ffd4a3"];
  const count = 60;

  for(let i=0;i<count;i++){
    particles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height/2,
      vx: (Math.random()-0.5)*6,
      vy: Math.random()*4+2,
      size: (Math.random()*8+6)*DPR,
      color: colors[Math.floor(Math.random()*colors.length)],
    });
  }

  let ticks = 0;
  function frame(){
    ticks++;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(let p of particles){
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.06 * DPR;

      ctx.fillStyle = p.color;
      ctx.fillRect(p.x, p.y, p.size, p.size*0.6);
    }
    if(ticks < 220) requestAnimationFrame(frame);
  }
  frame();
}
</script>
</body>
</html>
